@model IEnumerable<MovieWeb.Models.MovieIndexViewModel>


<style>
    body {
        background: url('https://wallpaperaccess.com/full/3988284.jpg') no-repeat center center fixed;
        background-size: cover;
        color: #fff;
    }

        body::before {
            content: "";
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: inherit;
            filter: blur(10px) brightness(1.2);
            z-index: -1;
        }

    .card {
        background: rgba(0,0,0,0.6);
        color: #fff;
    }

        .card .btn {
            font-weight: bold;
        }

    h1 {
        text-shadow: 2px 2px 10px rgba(0,0,0,0.7);
    }

    .genre-filters {
        text-align: center;
        margin-bottom: 20px;
    }

        .genre-filters .btn {
            margin: 0 5px 10px 5px;
        }
</style>

<h1 class="text-center my-4">🎬🍿 Now Showing</h1>

@{
    var currentGenre = ViewBag.CurrentGenre as string;
}

<div class="genre-filters text-center mb-4">
    <a class="btn @(currentGenre == "Mystery / Thriller" ? "btn-light" : "btn-outline-light") m-1" href="/Movie/Index?genre=Mystery / Thriller">Mystery / Thriller</a>
    <a class="btn @(currentGenre == "Sci-Fi / Adventure" ? "btn-light" : "btn-outline-light") m-1" href="/Movie/Index?genre=Sci-Fi / Adventure">Sci-Fi / Adventure</a>
    <a class="btn @(currentGenre == "Musical / Romance" ? "btn-light" : "btn-outline-light") m-1" href="/Movie/Index?genre=Musical / Romance">Musical / Romance</a>
    <a class="btn @(currentGenre == "Romance / Drama" ? "btn-light" : "btn-outline-light") m-1" href="/Movie/Index?genre=Romance / Drama">Romance / Drama</a>
    <a class="btn @(currentGenre == "Musical / Comedy" ? "btn-light" : "btn-outline-light") m-1" href="/Movie/Index?genre=Musical / Comedy">Musical / Comedy</a>
    <a class="btn @(currentGenre == "3D / Adventure" ? "btn-light" : "btn-outline-light") m-1" href="/Movie/Index?genre=3D / Adventure">3D / Adventure</a>

    <a class="btn @(string.IsNullOrEmpty(currentGenre) ? "btn-light" : "btn-outline-light") m-1" href="/Movie/Index">All</a>
</div>




<div class="d-flex flex-wrap justify-content-center gap-4">
    @foreach (var movie in Model)
    {
        <div class="card" style="width: 18rem;">
            <img class="card-img-top" src="@movie.Movie.ImageUrl" alt="@movie.Movie.Name" />

            <div style="
        position: absolute;
        top: 10px;
        left: 10px;
        background: rgba(0,0,0,0.7);
        padding: 6px 12px;
        border-radius: 8px;
        color: #FFA500; 
        font-weight: bold;
        font-size: 1rem;
        text-shadow: 1px 1px 3px rgba(0,0,0,0.8);
        box-shadow: 0 0 8px rgba(255,165,0,0.7);
        z-index: 10;">
                ★ @movie.Movie.Rating
            </div>


            <div class="card-body">
                <h5 class="card-title mb-3">@movie.Movie.Name</h5>
                <p class="card-text"><strong>Duration:</strong> @movie.Movie.Duration minutes</p>
                <p class="card-text"><strong>Release:</strong> @movie.Movie.ReleaseDate.ToString("yyyy-MM-dd")</p>
                <a href="/Movie/Details/@movie.Movie.Id" class="btn btn-warning  mb-2">📒 More Info</a>
                <a href="/Movie/Buy/@movie.Movie.Id" class="btn btn-success  mb-2">📒 Buy</a>
                @if (User.Identity.IsAuthenticated && User.IsInRole("Admin"))
                {
                    <a class="btn btn-primary mb-2" asp-action="Edit" asp-route-id="@movie.Movie.Id"> ✏️ Edit</a>
                }

                @if (User.Identity.IsAuthenticated && User.IsInRole("Admin"))
                {
                    <a class="btn btn-info  mb-2" asp-action="AddShowing" asp-route-id="@movie.Movie.Id">
                        ➕ Add Showing
                    </a>
                }
               
                @if (User.Identity.IsAuthenticated && User.IsInRole("Admin"))
                {
                    <a class="btn add-movie-btn  mb-2" asp-action="AddMovie">
                        ➕ Add Movie
                    </a>
                }

                @if (User.Identity.IsAuthenticated && User.IsInRole("Admin"))
                {
                    <a class="btn btn-danger mb-2" asp-action="RemoveShowing" asp-route-movieId="@movie.Movie.Id">
                        🗑️ Remove Showing
                    </a>
                }




            </div>
        </div>
    }
</div>
<style>
    .add-movie-btn {
        background-color: #D8B4FF; 
        color: #000;
        border: none;
    }

        .add-movie-btn:hover {
            background-color: #C084FC;
            color: #fff;
        }
        .add-showing-btn .plus-symbol {
            color: #fff;
            margin-right: 5px;
            font-weight: bold;
        }

    .btn-danger {
        background-color: #dc3545;
        color: #fff;
        font-weight: bold;
    }

        .btn-danger:hover {
            background-color: #b02a37;
            color: #fff;
        }

</style>